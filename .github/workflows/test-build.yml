name: Newman CLI Sample Run
on:
    push:
        branches: [ main ]

jobs:
    postman_test:
        runs-on: ubuntu-latest
    
        steps:
        - name: Checkout code
          uses: actions/checkout@v2
    
        - name: Install Newman
          run: | 
           npm install -g newman
           npm install -g newman-reporter-htmlextra
        
        - name: Make Directory for results
          run: mkdir -p testResults

        - name: Run Postman Collection
          run: newman run "./postman/Virtual Agent.postman_collection.json" -r htmlextra --reporter-htmlextra-export testResults/htmlreport.html --reporter-htmlextra-darkTheme  > testResults/runreport1.html

        - name: Details
          uses: actions/upload-artifact@v2
            with:
             name: RunReports
             path: testResults            
